(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{126:function(e,n,t){e.exports=t(162)},131:function(e,n,t){},135:function(e,n,t){},156:function(e,n,t){},160:function(e,n,t){},161:function(e,n,t){},162:function(e,n,t){"use strict";t.r(n);var a,o=t(0),r=t.n(o),l=t(46),c=t.n(l),i=t(39),u=t(12),s=t(32),m=(t(131),function(e){var n=e.children;return r.a.createElement("header",{className:"main-header"},n)}),d=t(28),g=(t(135),t(34)),f=function(){var e=Object(d.c)((function(e){return e.auth.login.isLoggedIn})),n=Object(d.c)((function(e){return e.auth.login.userId})),t=Object(d.b)();return r.a.createElement("ul",{className:"nav-links"},r.a.createElement("li",null,r.a.createElement(s.c,{to:"/",exact:!0},"ALL USERS")),e&&r.a.createElement("li",null,r.a.createElement(s.c,{to:"/".concat(n,"/places")},"MY PLACES")),e&&r.a.createElement("li",null,r.a.createElement(s.c,{to:"/places/new"},"ADD PLACE")),!e&&r.a.createElement("li",null,r.a.createElement(s.c,{to:"/auth"},"AUTHENTICATE")),e&&r.a.createElement("li",null,r.a.createElement("button",{onClick:function(){return t(g.a.authReset())}},"LOGOUT")))},p=(t(156),t(176)),h=t(27),E=function(e){var n=e.isOpen,t=e.onClose;return r.a.createElement(p.a,{placement:"left",isOpen:n,onClose:t},r.a.createElement(h.h,null),r.a.createElement(p.b,null,r.a.createElement(h.g,{borderBottomWidth:"1px"}),r.a.createElement(h.b,null,r.a.createElement(f,null))))},b=t(174),v=t(178),O=function(e){var n=Object(b.a)(),t=n.isOpen,a=n.onOpen,o=n.onClose;return r.a.createElement(r.a.Fragment,null,r.a.createElement(E,{onClose:o,isOpen:t}),r.a.createElement(m,null,r.a.createElement(v.a,{display:{lg:"none"},fontSize:"3rem",color:"white",_hover:{cursor:"pointer"},mr:"2rem",onClick:a}),r.a.createElement("h1",{className:"main-navigation__title"},r.a.createElement(s.b,{to:"/"},"YourPlaces")),r.a.createElement("nav",{className:"main-navigation__header-nav"},r.a.createElement(f,null))))},w=(t(160),function(e){return r.a.createElement("div",{className:"".concat(e.asOverlay&&"loading-spinner__overlay")},r.a.createElement("div",{className:"lds-dual-ring"}))}),j=r.a.lazy((function(){return Promise.all([t.e(9),t.e(8)]).then(t.bind(null,216))})),k=r.a.lazy((function(){return t.e(5).then(t.bind(null,211))})),I=r.a.lazy((function(){return t.e(4).then(t.bind(null,212))})),y=r.a.lazy((function(){return Promise.all([t.e(7),t.e(6)]).then(t.bind(null,217))})),x=r.a.lazy((function(){return t.e(3).then(t.bind(null,215))})),S=function(){var e,n=Object(d.c)((function(e){return e.auth.login.expiration})),t=Object(d.c)((function(e){return e.auth.login.token})),l=Object(d.b)();return Object(o.useEffect)((function(){var e=JSON.parse(localStorage.getItem("userData"));e&&e.token&&new Date<new Date(e.expiration)&&l(g.a.localLogin(Object(i.a)(Object(i.a)({},e),{},{expiration:new Date(e.expiration).toISOString()})))}),[l]),Object(o.useEffect)((function(){if(t&&n){var e=new Date(n).getTime()-(new Date).getTime();a=setTimeout((function(){l(g.a.authReset())}),e)}else clearTimeout(a)}),[t,n,l]),e=t?r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/",component:j,exact:!0}),r.a.createElement(u.b,{path:"/:userId/places",component:y,exact:!0}),r.a.createElement(u.b,{path:"/places/new",component:k,exact:!0}),r.a.createElement(u.b,{path:"/places/:placeId",component:I,exact:!0}),r.a.createElement(u.a,{to:"/"})):r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/",component:j,exact:!0}),r.a.createElement(u.b,{path:"/:userId/places",component:y,exact:!0}),r.a.createElement(u.b,{path:"/auth",component:x,exact:!0}),r.a.createElement(u.a,{to:"/auth"})),r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,null,r.a.createElement(O,null),r.a.createElement("main",{className:""},r.a.createElement(o.Suspense,{fallback:r.a.createElement("div",{className:"center"},r.a.createElement(w,null))},e))))},L=t(173),N=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function D(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var C=t(53),T=Object(C.a)({reducer:{auth:g.b},devTools:!1});t(161);c.a.render(r.a.createElement(d.a,{store:T},r.a.createElement(L.a,null,r.a.createElement(S,null))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");N?function(e){fetch(e).then((function(n){404===n.status||-1===n.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):D(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):D(e)}))}}()},34:function(e,n,t){"use strict";var a,o=t(6),r=t(39),l=t(53),c=t(77),i=t.n(c),u=t(75),s=t.n(u),m=t(85),d=function(e,n){return function(){var t=Object(m.a)(s.a.mark((function t(a,o){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.post(e,a);case 3:return r=t.sent,t.abrupt("return",o.fulfillWithValue(r.data));case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",o.rejectWithValue(t.t0.response.data.message||t.t0.message||"Something Went Wrong..."));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}()};t.d(n,"a",(function(){return b}));var g=i.a.create({headers:{"Content-Type":"multipart/form-data"}}),f=Object(l.b)("auth/signup",d("".concat("https://mern-places3.herokuapp.com/api","/users/signup"),g)),p=Object(l.b)("auth/login",d("".concat("https://mern-places3.herokuapp.com/api","/users/login"),i.a)),h={login:{isLoggedIn:!1}},E=Object(l.c)({name:"auth",initialState:h,reducers:{authReset:function(e){return e=h,localStorage.removeItem("userData"),e},localLogin:function(e,n){e.login=Object(r.a)(Object(r.a)({},n.payload),{},{isLoggedIn:!0})}},extraReducers:(a={},Object(o.a)(a,f.pending,(function(e,n){e.loading=!0,e.user=null})),Object(o.a)(a,f.fulfilled,(function(e,n){e.loading=!1,e.error=null,e.user=n.payload})),Object(o.a)(a,f.rejected,(function(e,n){e.loading=!1,e.error=n.payload,e.user=null})),Object(o.a)(a,p.pending,(function(e,n){e.login.loading=!0,e.login.isLoggedIn=!1,e.login.token=null})),Object(o.a)(a,p.fulfilled,(function(e,n){e.login.loading=!1,e.login.error=null,e.login.userId=n.payload.userId,e.login.token=n.payload.token,e.login.isLoggedIn=!!e.login.token,localStorage.setItem("userData",JSON.stringify({userId:e.login.userId,token:e.login.token,expiration:new Date((new Date).getTime()+36e5).toISOString()}))})),Object(o.a)(a,p.rejected,(function(e,n){e.login.loading=!1,e.login.isLoggedIn=!1,e.login.error=n.payload,e.login.token=null})),a)}),b=Object(r.a)(Object(r.a)({},E.actions),{},{authSignup:f,authLogin:p});n.b=E.reducer}},[[126,1,2]]]);
//# sourceMappingURL=main.45ab1250.chunk.js.map